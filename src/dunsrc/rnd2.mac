	.TITLE	RND - DUNGEON'S RANDOM NUMBER GENERATOR
	.IDENT	"V0001"

NUMBER:	.BLKL	1			; CURRENT RANDOM NUMBER

;
; ENTRY TO INITIALIZE - CALLED AS INIRND (LOW, HIGH)
;

INIRND::
	.WORD	0
	MOVW	@4(AP),NUMBER
	MOVW	@8(AP),NUMBER+2
	RET


;
; ENTRY TO GET A RANDOM NUMBER, MOD N. CALLED RND (N)
;

RND::
	.WORD	^M<R2>
	MULL3	NUMBER,#129,R0
	ADDL	#^O11700201057,R0
	MOVL	R0,NUMBER
	CLRL	R1
	MOVZWL	@4(AP),R2
	EDIV	R2,R0,R1,R0
	RET



	.END
